version: '3.5'
services:
  http-api:
    build:
      context: .
      dockerfile: Dockerfile
    environment: 
      - CLOUDAMQP_URL=amqp://guest:guest@rabbitmq:5672/rabbitmq_vhost
    command: python -u app/api.py
    ports:
      - "5001:5001"
    networks:
      - hacker-news-ops_default
    volumes:
      - .:/app

networks:
  hacker-news-ops_default:
    external: true
